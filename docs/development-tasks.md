# AI 식단 관리 서비스 프로토타입 개발 태스크

## 프로젝트 개요
- **프로젝트명**: 원클릭 AI 식단 기록 서비스 프로토타입
- **핵심 철학**: "마찰 없는 기록(Frictionless Logging)"
- **기술 스택**: Next.js 14 App Router, TypeScript, Supabase, n8n

---

## 📋 전체 태스크 진행 상황

### 🏗️ 1. 프로젝트 환경 설정 및 초기 구조
- [x] **1.1** Next.js 프로젝트 초기 설정
  - [x] npx create-next-app@latest 실행 (App Router, TypeScript 옵션)
  - [x] package.json 확인 및 수정
  - [x] next.config.ts 기본 설정
  - [x] tsconfig.json 설정 최적화

- [x] **1.2** UI 라이브러리 및 스타일링 설정
  - [x] TailwindCSS 설치 및 설정
  - [ ] shadcn/ui 초기화 및 기본 컴포넌트 설치
  - [x] 글로벌 CSS 파일 설정
  - [ ] 다크모드 설정 (선택사항)

- [x] **1.3** 개발 도구 및 코드 품질 설정
  - [ ] .env.local 파일 생성 및 예시 작성
  - [ ] .env.example 파일 생성
  - [ ] prettier 설정 파일 작성
  - [ ] ESLint 규칙 커스터마이징
  - [x] .gitignore 파일 검토

**의존성**: 없음 | **우선순위**: 높음 | **담당자**: ___

---

### 🛢️ 2. Supabase 프로젝트 설정 및 연동
- [ ] **2.1** Supabase 프로젝트 생성 및 설정
  - [ ] Supabase 계정 생성 및 로그인
  - [ ] 새 프로젝트 생성
  - [ ] 데이터베이스 비밀번호 설정
  - [ ] 프로젝트 URL 및 API 키 확인
  - [ ] 프로젝트 설정 검토

- [ ] **2.2** Supabase 클라이언트 라이브러리 설치 및 초기화
  - [ ] @supabase/supabase-js 라이브러리 설치
  - [ ] lib/supabase.ts 파일 생성
  - [ ] createClient로 Supabase 클라이언트 초기화
  - [ ] 환경변수에 SUPABASE_URL, SUPABASE_ANON_KEY 추가

- [ ] **2.3** Supabase 연결 테스트
  - [ ] 테스트 페이지 또는 API 라우트 생성
  - [ ] Supabase 클라이언트 연결 상태 확인
  - [ ] 기본 테이블 쿼리 테스트
  - [ ] 에러 처리 확인

**의존성**: Task 1 완료 | **우선순위**: 높음 | **담당자**: ___

---

### 🗄️ 3. 데이터베이스 스키마 설계 및 생성
- [ ] **3.1** users 테이블 설계 (Supabase Auth 연동)
- [ ] **3.2** food_logs 테이블 설계
  - [ ] id (primary key)
  - [ ] user_id (foreign key to auth.users)
  - [ ] meal_type (아침/점심/저녁/간식)
  - [ ] image_url (Supabase Storage 경로)
  - [ ] ai_analysis_result (JSONB)
  - [ ] total_calories (integer)
  - [ ] nutrients (JSONB)
  - [ ] created_at, updated_at (timestamp)
- [ ] **3.3** RLS (Row Level Security) 정책 설정
- [ ] **3.4** 인덱스 설정
- [ ] **3.5** 테이블 생성 확인 및 기본 CRUD 쿼리 테스트

**의존성**: Task 2 완료 | **우선순위**: 높음 | **담당자**: ___

---

### 📁 4. Supabase Storage 설정
- [ ] **4.1** 'food-images' 버킷 생성
- [ ] **4.2** 공개 액세스 정책 설정
- [ ] **4.3** 파일 업로드 제한 설정 (이미지 파일만, 최대 5MB)
- [ ] **4.4** RLS 정책 설정 (사용자별 접근 제어)
- [ ] **4.5** 이미지 파일 업로드 및 URL 접근 테스트

**의존성**: Task 2 완료 | **우선순위**: 중간 | **담당자**: ___

---

### 🔐 5. 사용자 인증 시스템 구현
- [ ] **5.1** Supabase Auth 설정 및 타입 정의
  - [ ] @supabase/auth-helpers-nextjs 설치
  - [ ] Auth 타입 정의 (User, Session, AuthError)
  - [ ] Supabase 클라이언트에 Auth 설정 추가
  - [ ] Auth 관련 환경변수 설정

- [ ] **5.2** AuthContext 및 Provider 구현
  - [ ] createContext로 AuthContext 생성
  - [ ] AuthProvider 컴포넌트 구현
  - [ ] useAuth 커스텀 훅 구현
  - [ ] 인증 상태 변화 감지 및 업데이트
  - [ ] 로딩 상태 관리

- [ ] **5.3** 회원가입 페이지 및 컴포넌트 구현
  - [ ] /signup 페이지 생성
  - [ ] 회원가입 폼 컴포넌트 구현
  - [ ] 이메일/비밀번호 유효성 검사
  - [ ] signUp 함수 구현
  - [ ] 에러 처리 및 사용자 피드백
  - [ ] 이메일 인증 안내 UI

- [ ] **5.4** 로그인 페이지 및 컴포넌트 구현
  - [ ] /login 페이지 생성
  - [ ] 로그인 폼 컴포넌트 구현
  - [ ] signIn 함수 구현
  - [ ] 로그인 실패 에러 처리
  - [ ] 비밀번호 재설정 링크
  - [ ] 회원가입 페이지로 이동 링크

- [ ] **5.5** 보호된 라우트 및 인증 가드 구현
  - [ ] ProtectedRoute 컴포넌트 구현
  - [ ] 미인증 사용자 리다이렉트 로직
  - [ ] 인증 로딩 중 스피너 표시
  - [ ] 메인 페이지에 인증 가드 적용

**의존성**: Task 2 완료 | **우선순위**: 높음 | **담당자**: ___

---

### 🎨 6. 메인 레이아웃 및 네비게이션 구현
- [x] **6.1** 모바일 최적화된 메인 레이아웃 컴포넌트
- [x] **6.2** 상단 네비게이션 바 구현
  - [x] 식단 기록 (메인)
  - [x] 나의 식단 (대시보드)
  - [x] 설정/프로필 (아이콘만)
- [x] **6.3** 반응형 디자인 적용
- [x] **6.4** 네비게이션 상태 관리
- [x] **6.5** 활성 탭 표시
- [x] **6.6** 모바일과 데스크톱에서 네비게이션 동작 확인

**의존성**: Task 1, 5 완료 | **우선순위**: 중간 | **담당자**: ___

---

### 📸 7. 이미지 업로드 컴포넌트 구현
- [ ] **7.1** 파일 선택 인터페이스 구현
  - [ ] input type="file" 커스터마이징
  - [ ] accept="image/*" 설정
  - [ ] capture="environment" 모바일 카메라 접근
  - [ ] 파일 선택 버튼 스타일링
  - [ ] 드래그 앤 드롭 기능 (데스크톱)

- [ ] **7.2** 이미지 미리보기 및 검증
  - [ ] 이미지 미리보기 컴포넌트
  - [ ] 파일 타입 검증 (이미지만 허용)
  - [ ] 파일 크기 제한 (5MB)
  - [ ] 이미지 리사이징/압축 (선택사항)
  - [ ] 에러 메시지 표시

- [ ] **7.3** Supabase Storage 업로드 함수
  - [ ] uploadImage 함수 구현
  - [ ] 파일명 생성 로직 (UUID + timestamp)
  - [ ] 업로드 진행률 표시
  - [ ] 에러 처리 및 재시도 로직
  - [ ] 업로드 완료 후 URL 반환

**의존성**: Task 4, 6 완료 | **우선순위**: 높음 | **담당자**: ___

---

### 🔗 8. n8n 웹훅 연동 서비스 구현
- [ ] **8.1** n8n 웹훅 API 타입 정의
  - [ ] 웹훅 요청 타입 정의
  - [ ] AI 분석 결과 응답 타입 정의
  - [ ] 에러 응답 타입 정의
  - [ ] 영양성분 정보 타입 정의
  - [ ] API 응답 validation 스키마

- [ ] **8.2** 웹훅 전송 함수 구현
  - [ ] FormData로 multipart/form-data 구성
  - [ ] fetch API를 사용한 POST 요청
  - [ ] 환경변수에서 웹훅 URL 가져오기
  - [ ] 타임아웃 설정 (30초)
  - [ ] 요청 헤더 설정

- [ ] **8.3** 응답 처리 및 에러 핸들링
  - [ ] 성공 응답 파싱 및 검증
  - [ ] 에러 응답 처리
  - [ ] 네트워크 에러 처리
  - [ ] 재시도 로직 구현 (최대 3회)
  - [ ] 사용자 친화적 에러 메시지 생성

**의존성**: Task 7 완료 | **우선순위**: 높음 | **담당자**: ___

---

### 🏠 9. 식단 기록 메인 페이지 구현
- [x] **9.1** 메인 페이지 UI 구현
  - [x] 중앙 배치된 '식단 기록하기' 버튼
  - [x] 직관적인 아이콘 및 텍스트
  - [x] 모바일 친화적인 터치 영역
  - [x] 간단한 사용법 안내 텍스트
  - [x] 최근 기록 미리보기 (임시 데이터)

- [x] **9.2** 원클릭 기록 플로우 구현
  - [x] 버튼 클릭 → 이미지 선택 → 즉시 처리 플로우
  - [x] 사용자 추가 입력 없이 자동 진행
  - [x] 백그라운드 처리 구현
  - [x] 각 단계별 상태 관리

- [x] **9.3** 로딩 및 피드백 UI 구현
  - [x] 업로드 중 프로그레스 표시
  - [x] AI 분석 중 로딩 애니메이션
  - [x] 성공 시 간단한 성공 메시지
  - [x] 실패 시 에러 메시지 및 재시도 옵션
  - [x] 처리 시간 예상 안내

**의존성**: Task 8 완료 | **우선순위**: 높음 | **담당자**: ___

---

### 📊 10. 식단 데이터 조회 API 구현
- [ ] **10.1** 날짜별 식단 조회 함수 구현
- [ ] **10.2** 끼니별(아침/점심/저녁/간식) 필터링
- [ ] **10.3** 사용자별 데이터 보안 (RLS 활용)
- [ ] **10.4** 페이지네이션 구현
- [ ] **10.5** 총 칼로리 및 영양성분 합계 계산
- [ ] **10.6** 캐싱 전략 구현 (React Query 또는 SWR)
- [ ] **10.7** 타입스크립트 인터페이스 정의
- [ ] **10.8** 다양한 조건으로 식단 데이터 조회 및 성능 테스트

**의존성**: Task 3, 5 완료 | **우선순위**: 중간 | **담당자**: ___

---

### 📈 11. 식단 대시보드 페이지 구현
- [x] **11.1** 날짜 선택 컴포넌트 (캘린더)
- [x] **11.2** 끼니별 탭 또는 섹션 구분
- [x] **11.3** 식단 아이템 카드 컴포넌트
  - [x] 음식 이미지 썸네일
  - [x] 음식명 및 칼로리 정보
  - [ ] AI 분석 신뢰도 표시 (추후 실제 데이터 연동 시)
- [x] **11.4** 일일 총 칼로리 및 영양성분 요약
- [ ] **11.5** 무한 스크롤 또는 페이지네이션
- [x] **11.6** 로딩 및 에러 상태 처리
- [x] **11.7** 대시보드에서 식단 데이터 표시 및 인터랙션 테스트

**의존성**: Task 10 완료 | **우선순위**: 높음 | **담당자**: ___

---

### 🔍 12. 식단 상세 정보 컴포넌트 구현
- [ ] **12.1** 모달 또는 별도 페이지로 상세 정보 표시
- [ ] **12.2** 원본 이미지 확대 보기
- [ ] **12.3** AI 분석 결과 상세 표시
  - [ ] 개별 음식 목록
  - [ ] 각 음식의 추정 양과 칼로리
  - [ ] 영양성분 상세 정보
  - [ ] AI 신뢰도 스코어
- [ ] **12.4** 기록 시간 및 끼니 정보
- [ ] **12.5** 닫기/뒤로가기 기능
- [ ] **12.6** 상세 정보 모달 표시 및 데이터 정확성 확인

**의존성**: Task 11 완료 | **우선순위**: 중간 | **담당자**: ___

---

### ⚠️ 13. 에러 처리 및 사용자 피드백 시스템
- [ ] **13.1** 전역 에러 바운더리 구현
- [ ] **13.2** Toast 알림 시스템 구현
- [ ] **13.3** n8n 에러 코드별 사용자 친화적 메시지 정의
- [ ] **13.4** 네트워크 에러 처리
- [ ] **13.5** 로딩 상태 일관성 관리
- [ ] **13.6** 오프라인 상태 감지 및 안내
- [ ] **13.7** 재시도 메커니즘
- [ ] **13.8** 다양한 에러 상황에서 적절한 피드백 표시 확인

**의존성**: Task 9, 11 완료 | **우선순위**: 중간 | **담당자**: ___

---

### 📱 14. 모바일 UX 최적화
- [ ] **14.1** PWA (Progressive Web App) 설정
- [ ] **14.2** 모바일 뷰포트 및 반응형 디자인 최적화
- [ ] **14.3** 터치 인터랙션 최적화
- [ ] **14.4** 로딩 성능 최적화
- [ ] **14.5** 이미지 압축 및 최적화
- [ ] **14.6** 캐싱 전략 구현
- [ ] **14.7** 오프라인 기능 고려
- [ ] **14.8** 다양한 모바일 기기에서 성능 및 UX 테스트

**의존성**: Task 12 완료 | **우선순위**: 중간 | **담당자**: ___

---

### 🚀 15. 프로토타입 테스트 및 배포
- [ ] **15.1** 전체 사용자 플로우 통합 테스트
- [ ] **15.2** 크로스 브라우저 테스트
- [ ] **15.3** 성능 테스트 및 최적화
- [ ] **15.4** Vercel 배포 설정
- [ ] **15.5** 환경변수 설정 (production)
- [ ] **15.6** 도메인 연결 (선택사항)
- [ ] **15.7** 모니터링 및 로그 설정
- [ ] **15.8** 프로덕션 환경에서 전체 기능 동작 확인

**의존성**: Task 13, 14 완료 | **우선순위**: 중간 | **담당자**: ___

---

## 📊 전체 진행률 추적

### 완료 현황
- **환경 설정**: ✅⬜⬜⬜⬜ (1/5)
- **백엔드 설정**: ⬜⬜⬜⬜⬜ (0/5)
- **인증 시스템**: ⬜⬜⬜⬜⬜ (0/5)
- **UI/UX**: ✅✅⬜⬜⬜ (2/5)
- **핵심 기능**: ⬜⬜✅⬜✅ (2/5)
- **최적화 & 배포**: ⬜⬜⬜⬜⬜ (0/5)

### 전체 진행률: 33% (5/15 Tasks 완료)

---

## 🎯 다음 우선순위 태스크
1. **Task 1**: 프로젝트 환경 설정 및 초기 구조
2. **Task 2**: Supabase 프로젝트 설정 및 연동
3. **Task 3**: 데이터베이스 스키마 설계 및 생성

---

## 📝 참고사항
- 각 체크박스를 완료할 때마다 체크 표시를 해주세요
- 이슈가 발생할 경우 해당 태스크 옆에 메모를 남겨주세요
- 각 태스크는 독립적으로 완료 가능하도록 설계되었습니다
- 의존성이 있는 태스크는 선행 태스크 완료 후 진행해주세요
